# Проблемы

### вопросы с 29.11 по ...

* Правильно ли я сделал, что для entity (model) Task в качестве полей ссылок указал Users (поля assignee и author), а для
DTO TaskDto использовал строковые поля assigneeEmail и authorEmail (сделал так, чтобы логику поиска пользователя вынести
из контроллера в бизнес слой, и потому что при заполнении формы пользователи передают email как поле идентифицирующее
пользователя). Каким принято делать состав DTO, есть какие-то рекомендации? Не ли разделять DTO, передающее данные
во вью и принимающее данные из вью, вроде TaskDto и TaskForm?

* Какой тип использовать для даты и для дата+время в entity и соответственно в DTO? Я где-то подсмотрел и использовал
Timestamp, в таймлифе он нормально форматируется по установленному мной формату. Но также видел варианты с LocalDate
и какие то еще.
Правильно ли я сделал в entity Task типы, например поля hours?

* Какими механизмами при MVC приложении реализовывают "выбор" значения в ссылочные поля. Например, у меня на формах
создания и редактирования задач я ввожу исполнителя как адрес почты. Без фронт-енда, я понимаю, что надо будет сделать
контроллер, возвращающий json со списком пользователей. А как его обработать на стороне view? Эта проблема будет еще
заметнее, когда я буду выводить поле "Проект"...
Для поля проект я выведу на форму id проекта? и ид типа long и буду получать из формы, чтобы в задаче ссылку определить.
Какие то же есть механизмы стендартнее? Или выводить на форму строковое представление проекта (наименование) и его
включить в DTO вместо или вместе с id проекта?

* Что надо сделать, чтобы исключения возвращали ошибку пользователю? У меня исключение в SignUpService, но контроллер
после исключения спокойно продолжает работать (если сделать sign up с любым левым инвайтом или несуществующей почтой)

### Текущие проблемы

* я сделал форму входа и таблицу с логинами, но целый день проковырялся с настройкой "remember me", все затаскивал из 
учебных примеров, из примеров в интернете, а оно не работает. заработало, когда я прописал "запоминать всегда", без 
него куки не создавало, и записи в персистент логинс не делало. я не понимаю, как отладить, приходит ли это свойство 
из вью в контроллер логина.

* затем добавил страницу с пользователями, указал для нее, что нужно дать доступ только админу, но напортачил с учетными 
данными и как оказалось сам был не админом. Как проверить в отладке, под кем я зарегистрирован, какая роль, как проходит
текущий запрос к данным.

* на странице с пользователями у меня есть форма для создания нового пользователя (invite) и есть кнопки для деактивации
пользователей. Как правильно организовать работу этих кнопок - на разные url, или передавать в hidden поле тип команды,
вроде action="invite" и action="delete"?

* я не понимаю как правильно именовать классы, как назвать класс, который будет отправлять почту. email dispatcher, 
email service, email processor, email resolver, email util - в чем разница и что когда принято

* как правильно реализовать разные view для разных ролей - разные шаблоны программно возвращать?

### "Будущие" проблемы

какой объем функционала нужно покрывать тестами, много классов не имеют функционала. надо ли покрывать тестами 
веб-контроллеры

я не представляю как сделать разграничение по правам в объекте (пользователь должен иметь доступ к редактированию только
части полей документа), как реализовать маскирование данных по ролям

как вообще принято реализовывать работу с "документами" - отображение в форме с кнопкой "сохранить", или отдельная 
кнопка для редактирования. если мы делаем MVC.
