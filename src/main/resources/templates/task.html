<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head th:replace="fragments/general.html :: common_header(~{::title})">
    <title th:text="${taskDto.shortDescription}">Task title</title>
</head>
<body>

<main>

        <div class="container">
            <br>
            <div class="row">
                <form action="#" th:action="@{/tasks/{id}(id=${taskDto.id})}" th:object="${taskDto}" method="post">
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="project">Project:</label>
                        <div class="col-sm-10">
                            <select class="form-control" th:field="*{project}" id="project" name="project">
                                <option th:each="project : ${projects}" th:value="${project.id}" th:text="${project.title}"></option>
                            </select>
                            <span class="has-error" th:if="${#fields.hasErrors('project')}" th:errors="*{project}"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="shortDescription">Task title:</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" th:field="*{shortDescription}" id="shortDescription" name="shortDescription" placeholder="Enter task number and title">
                            <span class="has-error" th:if="${#fields.hasErrors('shortDescription')}" th:errors="*{shortDescription}"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="fullDescription">Description:</label>
                        <div class="col-sm-10">
                            <textarea rows="5" class="form-control" th:field="*{fullDescription}" id="fullDescription" name="fullDescription" placeholder="Enter full task description and details"></textarea>
                            <span class="has-error" th:if="${#fields.hasErrors('fullDescription')}" th:errors="*{fullDescription}"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="hours">Hours:</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" th:field="*{hours}" id="hours" name="hours" placeholder="0,00">
                            <span class="has-error" th:if="${#fields.hasErrors('hours')}" th:errors="*{hours}"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="assignee">Assignee:</label>
                        <div class="col-sm-10">
                            <select class="form-control" th:field="*{assignee}" id="assignee" name="assignee">
                                <option th:each="user : ${users}" th:value="${user.email}" th:text="${user.name}"></option>
                            </select>
                            <span class="has-error" th:if="${#fields.hasErrors('assignee')}" th:errors="*{assignee}"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="createdAt">Created:</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" th:field="*{createdAt}" th:value="*{{createdAt}}" id="createdAt" readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="hidden" th:field="*{author}">
                        <label class="control-label col-sm-2" for="authorName">Author:</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" th:value="*{author.name}" id="authorName" readonly>
                        </div>
                    </div>
                    <br>
                    <div class="form-group">
                        <label class="control-label" for="finished">Finished</label>
                        <input type="checkbox" th:field="*{finished}" id="finished" name="finished">
                    </div><br>
                    <div class="form-group">
                        <div class="col-sm-2-offset-2 col-sm-10">
                            <button class="btn btn-sm btn-success" type="submit">Save changes & close</button>
                            <a  class="btn btn-sm btn-danger" href="#" th:href="@{/}">Cancel</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
</main>

</body>

</html>